# システムアーキテクチャ

## 概要

技術情報を自動収集し、要約・分類してSlackなどに配信するシステム。

## 全体構成図

```
┌─────────────────────────────────────────────────────────────────┐
│                        n8n Workflows                            │
├────────────────────────────┬────────────────────────────────────┤
│   【インプットWF】          │      【アウトプットWF】             │
│   Schedule: 1時間ごと       │      Schedule: 6時間ごと           │
│                            │                                    │
│   ┌──────────┐             │      ┌──────────────┐              │
│   │ RSS取得   │             │      │ 未配信記事取得 │              │
│   └────┬─────┘             │      └──────┬───────┘              │
│        ▼                   │             ▼                      │
│   ┌──────────┐             │      ┌──────────────┐              │
│   │ 重複チェック│            │      │ スコアリング   │              │
│   └────┬─────┘             │      │ (ホット判定)   │              │
│        ▼                   │      └──────┬───────┘              │
│   ┌──────────┐             │             ▼                      │
│   │ AI分類    │             │      ┌──────────────┐              │
│   │ カテゴリ   │             │      │ AI要約        │              │
│   │ キーワード │             │      └──────┬───────┘              │
│   └────┬─────┘             │             ▼                      │
│        ▼                   │      ┌──────────────┐              │
│   ┌──────────┐             │      │ Slack通知     │              │
│   │Supabase  │◄────────────┼──────┤              │              │
│   │ 保存     │             │      └──────────────┘              │
│   └──────────┘             │                                    │
└────────────────────────────┴────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Supabase (PostgreSQL)                      │
├─────────────────────────────────────────────────────────────────┤
│  feed_sources / articles                                        │
└─────────────────────────────────────────────────────────────────┘
```

## コンポーネント

### n8n Workflows

#### インプットワークフロー
- **実行間隔**: 1時間ごと
- **処理内容**:
  1. DBからアクティブなRSSフィードソースを取得
  2. 各フィードをループで処理
  3. RSS取得・パース
  4. 重複チェック（guidベース）
  5. GPTでカテゴリ判定・キーワード抽出・要約・翻訳
  6. Supabaseに保存

#### アウトプットワークフロー
- **実行間隔**: 6時間ごと
- **処理内容**:
  1. 過去6時間以内に取得した記事を取得
  2. スコアリング（ホット判定）
  3. AI要約
  4. Slackに通知

### Supabase
- **用途**: データベース（PostgreSQL）
- **リージョン**: ap-northeast-1（東京）
- **プロジェクト名**: tech-news-collector

### AI (GPT)
- **用途**:
  - カテゴリ自動分類
  - キーワード抽出
  - 記事要約
  - 英語記事の日本語翻訳

## 配信先（予定）

| 配信先 | 優先度 | 状態 |
|--------|--------|------|
| Slack | 高 | Phase 1で実装 |
| Discord | 中 | 将来対応 |
| Webサイト | 低 | 将来対応 |
